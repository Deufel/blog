<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Semantic Dashboard Layout</title>
    <link rel="stylesheet" href="drawers.css">

    <style>
        /* Reset */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* CSS Variables for theming */
        :root {
            --surface-hue: #f5f5f5;
            --border-color: #e0e0e0;
            --section-padding: 1rem;
            --scrollbar-thumb: #c0c0c0;
            --scrollbar-track: transparent;
            --scrollbar-thumb-hover: #a0a0a0;
            --gap-size: 6px;
        }

        /* Main Dashboard Layout */
        body  {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            overscroll-behavior: none;
            display: grid;
            grid-template:
                "header header header" auto
                "nav main aside" 1fr
                "footer footer footer" auto
                / auto 1fr auto;
            height: 100svh;
            padding: var(--gap-size);
            margin: 0;

            /* Grid Area Assignments */
            > header { grid-area: header; margin-bottom: var(--gap-size); }
            > nav { grid-area: nav; margin-right: var(--gap-size); }
            > main { grid-area: main; }
            > aside { grid-area: aside; margin-left: var(--gap-size); }
            > footer { grid-area: footer; margin-top: var(--gap-size); }

            /* Each main section uses the same semantic layout pattern */
            > header, > nav, > main, > aside, > footer {
                display: grid;
                grid-template:
                    "header header header" auto
                    "nav main aside" 1fr
                    "footer footer footer" auto
                    / auto 1fr auto;
                overflow-y: auto;
                min-height: 0;

                /* Grid area assignments for nested sections */
                > header { grid-area: header; margin-bottom: var(--gap-size); }
                > nav { grid-area: nav; margin-right: var(--gap-size);  overflow-y: auto; }
                > main { grid-area: main; overflow-y: auto; overflow-x: auto; min-height: 0; }
                > aside { grid-area: aside; margin-left: var(--gap-size); overflow-y: auto; }
                > footer { grid-area: footer; margin-top: var(--gap-size); }
            }
            /* Hide empty nested sections or sections containing only dialog elements */
            > header:empty, > nav:empty, > aside:empty, > footer:empty { display: none; }
        }
    </style>
</head>
<body>
    <header style="border: 1px dotted red; border-radius: 5px;">
        <header style="background-color: #FFE5E5;">
            header &GT; header
        </header>
        <nav style="background-color: #E5F3FF;">
            <!-- Trigger button - targets the main nav drawer -->
            <!-- <button class="drawer-trigger" onclick="DrawerAPI.openDrawer('body > nav')">
              Open Main Menu
            </button> -->
            header &GT; nav
        </nav>
        <main style="background-color: #F0F8E5;">
            header &GT; main
        </main>
        <aside style="background-color: #FFF5E5;">
            header &GT; aside
        </aside>
        <footer style="background-color: #F5E5FF;">
            header &GT; footer
        </footer>
    </header>

    <!-- This is the main nav that becomes a drawer -->
    <nav data-drawer-breakpoint="768" style="border: 1px dotted red; border-radius: 5px;">
      <div class="drawer-content">
        <div class="drawer-header">
          <h2>Navigation</h2>
          <button class="drawer-close" onclick="this.closest('[popover]').hidePopover()"></button>
        </div>
        <div class="drawer-body">
          <ul>
            <li><a href="/">Home</a></li>
            <li><a href="/about">About</a></li>
            <li><a href="/contact">Contact</a></li>
            <li><a href="/services">Services</a></li>
          </ul>
        </div>
      </div>
    </nav>

    <main style="border: 1px dotted red; border-radius: 5px;">
        <header style="background-color: #FFE5E5;">
            main &GT; header
        </header>
        <nav style="background-color: #E5F3FF;">
            main &GT; nav
        </nav>
        <main style="background-color: #F8F8E5;">
            <h1>Main Content Area</h1>
            <p>This is the main content area. Try resizing the window to see the nav become a drawer at 768px and below.</p>
            <p>You can also click the "Open Main Menu" button in the header to manually open the drawer.</p>
        </main>
        <aside style="background-color: #FFF5E5;">
            main &GT; aside
        </aside>
        <footer style="background-color: #F5E5FF;">
            main &GT; footer
        </footer>
    </main>

    <!-- This aside could also become a drawer -->
    <aside data-drawer-breakpoint="1024" style="border: 1px dotted red; border-radius: 5px;">
        <header style="background-color: #FFE5E5;">
           <button class="drawer-trigger" onclick="DrawerAPI.openDrawer('body > aside')">
             Settings
           </button>
        </header>
        <main style="background-color: #F0F8E5;">
            <div class="drawer-content">
                <div class="drawer-header">
                    <h2>Settings Panel</h2>
                    <button class="drawer-close" onclick="this.closest('[popover]').hidePopover()"></button>
                </div>
                <div class="drawer-body">
                    <p>Settings and configuration options would go here.</p>
                    <form>
                        <label>
                            <input type="checkbox"> Enable notifications
                        </label>
                        <br><br>
                        <label>
                            Theme:
                            <select>
                                <option>Light</option>
                                <option>Dark</option>
                                <option>Auto</option>
                            </select>
                        </label>
                    </form>
                </div>
            </div>
        </main>
        <footer style="background-color: #F5E5FF;">
            aside &GT; footer
        </footer>
    </aside>

    <footer style="border: 1px dotted red; border-radius: 5px;">
        <!-- <nav style="background-color: #E5F3FF;">
            footer &GT; nav
        </nav> -->
        <main style="background-color: #F0F8E5;">
            footer &GT; main
        </main>
        <aside style="background-color: #FFF5E5;">
            footer &GT; aside
        </aside>
    </footer>

    <!-- Load JavaScript after DOM content -->
    <script src="drawer.js"></script>

    <!-- Optional: Add some debug/test buttons -->
    <script>
        // Wait for DOM to be fully loaded
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DrawerManager initialized:', window.drawerManager);
            console.log('DrawerAPI available:', window.DrawerAPI);

            // Add some test buttons to the main content
            const testButtons = document.createElement('div');
            testButtons.innerHTML = `
                <div style="position: fixed; bottom: 20px; right: 20px; display: flex; flex-direction: column; gap: 10px; z-index: 1000;">
                    <button onclick="DrawerAPI.openDrawer('body > nav')" style="padding: 8px 12px; background: #007acc; color: white; border: none; border-radius: 4px; cursor: pointer;">Open Nav</button>
                    <button onclick="DrawerAPI.openDrawer('body > aside')" style="padding: 8px 12px; background: #007acc; color: white; border: none; border-radius: 4px; cursor: pointer;">Open Aside</button>
                    <button onclick="DrawerAPI.closeActiveDrawer()" style="padding: 8px 12px; background: #dc3545; color: white; border: none; border-radius: 4px; cursor: pointer;">Close Drawer</button>
                </div>
            `;
            document.body.appendChild(testButtons);
        });
    </script>
</body>
</html>
