<!DOCTYPE html>
<html lang="en" data-signals="{themeMode: 'dark', fontScale: 'md', theme-color: 'cyan', layoutWidth: 'fullwidth'}">
    <head>
        <meta charset="UTF-8">
        <title id="title">Mike Deufel</title>
        <meta name="viewport" content="width=device-width,initial-scale=1">
        <!-- Datastar -->
        <style>@layer reset, design-system, layer theme, layout, utility, components, blocks</style>
        <script type="module" src="https://cdn.jsdelivr.net/gh/starfederation/datastar@main/bundles/datastar.js"></script>


        <!-- CSS -->
        <style>@layer css_1_reset, css_2_tokens, css_3_theme, css_4_base, css_5_layout, css_6_utilites, css_7_components, css_8_exceptions </style>
        <style id="css_1_reset"></style>
        <style id="css_2_tokens"></style>
        <style id="css_3_theme"></style>
        <style id="css_4_base"></style>
        <style id="css_5_layout"></style>
        <style id="css_6_utilities"></style>
        <style id="css_7_components"></style>
        <style id="css_8_exceptions"></style>


        <!-- Vendor Highlight JS -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/github.min.css" layer="hljs">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js"></script>

    </head>

    <body
        data-store="{btn: $btn}"
        data-signals="{windowWidth: window.innerWidth, currentPage: 'home'}"
        data-on-windowresize="$windowWidth = evt.detail.width"
        data-style-width="$layoutWidth === 'container' ? 'min(100%, 1200px)' : ''"
        data-on-load="
            window.layoutBroadcast = new BroadcastChannel('layout-updates');
            window.layoutBroadcast.onmessage = (e) => {
                if (e.data.type === 'layout-change') {
                    $layoutWidth = e.data.layoutWidth;
                }
            };
        "
        data-effect="
            window.layoutBroadcast?.postMessage({
                type: 'layout-change',
                layoutWidth: $layoutWidth
            });
        "
    >
        <header  id="header"> <code>&lt <strong>header  </strong> id="header" &gt</code> </header>
        <nav     id="nav"   > <code>&lt <strong>nav     </strong> id="nav"    &gt</code> </nav>
        <main    id="main" >
            <code>&lt <strong>main  </strong> id="main" &gt</code>
            <h1>Start Here</h1>
            <p>This demo is also designed to be a learning tool so you can interactivily see how the style system is built up</p>
            <em>Note: refresh at any time to start over</em>
            <p>Click the button below to load in the <code>Style Loader</code></p>
            <button data-on-click="@get('partials/main.html')">Style Loader</button>
        </main>
        <aside  id="aside" > <code>&lt <strong>aside   </strong> id="aside"  &gt</code>
            <hr><span><strong>Signals</strong></span><hr>
            <div data-text="'currentPage: ' + ($currentPage  || 'undefined')"></div>
            <div data-text="'windowWidth: ' + ($windowWidth  || 'undefined')"></div>
            <div data-text="'currentTab: '  + ($currentTab   || 'undefined')"></div>
            <div data-text="'themeMode: '   + ($themeMode    || 'undefined')"></div>
            <div data-text="'fontScale: '   +  ($fontScale   || 'undefined')"></div>
            <div data-text="'layoutWidth : '+  ($layoutWidth || 'undefined')"></div>
            <div data-text="'Button styl : '+  ($btn         || 'undefined')"></div>
        </aside>

        <!--These articles are always in drawers one of the top of the screen and the other from the bottom-->
        <article id="alerts" popover="auto"> <code>&lt <strong>article </strong> id="alerts" &gt</code> </article>
        <article id="dock" popover="auto"> <code>&lt <strong>article </strong> id="dock"   &gt</code> </article>

        <script>
          // Simple window resize handler that dispatches a custom event
          addEventListener('resize', () =>
              document.body.dispatchEvent(new CustomEvent('windowresize', {
                  detail: { width: innerWidth }
              }))
          );
        </script>
    </body>
</html>
